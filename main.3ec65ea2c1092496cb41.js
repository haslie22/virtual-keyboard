!function(){"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var s=e.g.document;if(!t&&s&&(s.currentScript&&(t=s.currentScript.src),!t)){var n=s.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!t;)t=n[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();const t=new Map(Object.entries({Backquote:{code:"Backquote",input:!0,en:"`",enCaps:"~",ru:"]",ruCaps:"["},Digit1:{code:"Digit1",input:!0,en:"1",enCaps:"!",ru:"1",ruCaps:"!"},Digit2:{code:"Digit2",input:!0,en:"2",enCaps:"@",ru:"2",ruCaps:'"'},Digit3:{code:"Digit3",input:!0,en:"3",enCaps:"#",ru:"3",ruCaps:"№"},Digit4:{code:"Digit4",input:!0,en:"4",enCaps:"$",ru:"4",ruCaps:"%"},Digit5:{code:"Digit5",input:!0,en:"5",enCaps:"%",ru:"5",ruCaps:":"},Digit6:{code:"Digit6",input:!0,en:"6",enCaps:"^",ru:"6",ruCaps:","},Digit7:{code:"Digit7",input:!0,en:"7",enCaps:"&",ru:"7",ruCaps:"."},Digit8:{code:"Digit8",input:!0,en:"8",enCaps:"*",ru:"8",ruCaps:";"},Digit9:{code:"Digit9",input:!0,en:"9",enCaps:"(",ru:"9",ruCaps:"("},Digit0:{code:"Digit0",input:!0,en:"0",enCaps:")",ru:"0",ruCaps:")"},Minus:{code:"Minus",input:!0,en:"-",enCaps:"_",ru:"-",ruCaps:"_"},Equal:{code:"Equal",input:!0,en:"=",enCaps:"+",ru:"=",ruCaps:"+"},Backspace:{code:"Backspace",input:!1,en:"Backspace",enCaps:"Backspace",ru:"Backspace",ruCaps:"Backspace"},Tab:{code:"Tab",input:!1,en:"Tab",enCaps:"Tab",ru:"Tab",ruCaps:"Tab"},KeyQ:{code:"KeyQ",input:!0,en:"q",enCaps:"Q",ru:"й",ruCaps:"Й"},KeyW:{code:"KeyW",input:!0,en:"w",enCaps:"W",ru:"ц",ruCaps:"Ц"},KeyE:{code:"KeyE",input:!0,en:"e",enCaps:"E",ru:"у",ruCaps:"У"},KeyR:{code:"KeyR",input:!0,en:"r",enCaps:"R",ru:"к",ruCaps:"К"},KeyT:{code:"KeyT",input:!0,en:"t",enCaps:"T",ru:"е",ruCaps:"Е"},KeyY:{code:"KeyY",input:!0,en:"y",enCaps:"Y",ru:"н",ruCaps:"Н"},KeyU:{code:"KeyU",input:!0,en:"u",enCaps:"U",ru:"г",ruCaps:"Г"},KeyI:{code:"KeyI",input:!0,en:"i",enCaps:"I",ru:"ш",ruCaps:"Ш"},KeyO:{code:"KeyO",input:!0,en:"o",enCaps:"O",ru:"щ",ruCaps:"Щ"},KeyP:{code:"KeyP",input:!0,en:"p",enCaps:"P",ru:"з",ruCaps:"З"},BracketLeft:{code:"BracketLeft",input:!0,en:"[",enCaps:"{",ru:"х",ruCaps:"Х"},BracketRight:{code:"BracketRight",input:!0,en:"]",enCaps:"}",ru:"ъ",ruCaps:"Ъ"},Backslash:{code:"Backslash",input:!0,en:"\\",enCaps:"|",ru:"ё",ruCaps:"Ё"},Delete:{code:"Delete",input:!1,en:"Del",enCaps:"Del",ru:"Del",ruCaps:"Del"},CapsLock:{code:"CapsLock",input:!1,en:"CapsLock",enCaps:"CapsLock",ru:"CapsLock",ruCaps:"CapsLock"},KeyA:{code:"KeyA",input:!0,en:"a",enCaps:"A",ru:"ф",ruCaps:"Ф"},KeyS:{code:"KeyS",input:!0,en:"s",enCaps:"S",ru:"ы",ruCaps:"Ы"},KeyD:{code:"KeyD",input:!0,en:"d",enCaps:"D",ru:"в",ruCaps:"В"},KeyF:{code:"KeyF",input:!0,en:"f",enCaps:"F",ru:"а",ruCaps:"А"},KeyG:{code:"KeyG",input:!0,en:"g",enCaps:"G",ru:"п",ruCaps:"П"},KeyH:{code:"KeyH",input:!0,en:"h",enCaps:"H",ru:"р",ruCaps:"Р"},KeyJ:{code:"KeyJ",input:!0,en:"j",enCaps:"J",ru:"о",ruCaps:"О"},KeyK:{code:"KeyK",input:!0,en:"k",enCaps:"K",ru:"л",ruCaps:"Л"},KeyL:{code:"KeyL",input:!0,en:"l",enCaps:"L",ru:"д",ruCaps:"Д"},Semicolon:{code:"Semicolon",input:!0,en:";",enCaps:":",ru:"ж",ruCaps:"Ж"},Quote:{code:"Quote",input:!0,en:"'",enCaps:'"',ru:"э",ruCaps:"Э"},Enter:{code:"Enter",input:!1,en:"Enter",enCaps:"Enter",ru:"Enter",ruCaps:"Enter"},ShiftLeft:{code:"ShiftLeft",input:!1,en:"Shift",enCaps:"Shift",ru:"Shift",ruCaps:"Shift"},KeyZ:{code:"KeyZ",input:!0,en:"z",enCaps:"Z",ru:"я",ruCaps:"Я"},KeyX:{code:"KeyX",input:!0,en:"x",enCaps:"X",ru:"ч",ruCaps:"Ч"},KeyC:{code:"KeyC",input:!0,en:"c",enCaps:"C",ru:"с",ruCaps:"С"},KeyV:{code:"KeyV",input:!0,en:"v",enCaps:"V",ru:"м",ruCaps:"М"},KeyB:{code:"KeyB",input:!0,en:"b",enCaps:"B",ru:"и",ruCaps:"И"},KeyN:{code:"KeyN",input:!0,en:"n",enCaps:"N",ru:"т",ruCaps:"Т"},KeyM:{code:"KeyM",input:!0,en:"m",enCaps:"M",ru:"ь",ruCaps:"Ь"},Comma:{code:"Comma",input:!0,en:",",enCaps:"<",ru:"б",ruCaps:"Б"},Period:{code:"Period",input:!0,en:".",enCaps:">",ru:"ю",ruCaps:"Ю"},Slash:{code:"Slash",input:!0,en:"/",enCaps:"?",ru:"/",ruCaps:"?"},ArrowUp:{code:"ArrowUp",input:!0,en:"↑",enCaps:"↑",ru:"↑",ruCaps:"↑"},ShiftRight:{code:"ShiftRight",input:!1,en:"Shift",enCaps:"Shift",ru:"Shift",ruCaps:"Shift"},ControlLeft:{code:"ControlLeft",input:!1,en:"Ctrl",enCaps:"Ctrl",ru:"Ctrl",ruCaps:"Ctrl"},MetaLeft:{code:"MetaLeft",input:!1,en:"Win",enCaps:"Win",ru:"Win",ruCaps:"Win"},AltLeft:{code:"AltLeft",input:!1,en:"Alt",enCaps:"Alt",ru:"Alt",ruCaps:"Alt"},Space:{code:"Space",input:!0,en:" ",enCaps:" ",ru:" ",ruCaps:" "},AltRight:{code:"AltRight",input:!1,en:"Alt",enCaps:"Alt",ru:"Alt",ruCaps:"Alt"},ArrowLeft:{code:"ArrowLeft",input:!0,en:"←",enCaps:"←",ru:"←",ruCaps:"←"},ArrowDown:{code:"ArrowDown",input:!0,en:"↓",enCaps:"↓",ru:"↓",ruCaps:"↓"},ArrowRight:{code:"ArrowRight",input:!0,en:"→",enCaps:"→",ru:"→",ruCaps:"→"},ControlRight:{code:"ControlRight",input:!1,en:"Ctrl",enCaps:"Ctrl",ru:"Ctrl",ruCaps:"Ctrl"}})),s=Array.from(t,(e=>{let[t,s]=e;return{key:t,value:s}})),n=[...s.filter((e=>!e.value.input)).map((e=>e.key))];const a=function(e){const t=document.createElement(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];return t.classList.add(...n),t};const i={span1:"The keyboard is created in MacOS. To change language, please use:",span2:"- left Ctrl + left Alt on displayed keyboard and Windows / Linux",span3:"- left Ctrl + left Opt on MacOS"};var r=e.p+"assets/sounds/default.mp3",u=e.p+"assets/sounds/space.mp3";class o{static#e=new Audio(r);static#t=new Audio(u);#s;constructor(e,t,s,n,a){this.container=e,this.config=t,this.styleConfig=s,this.language=n,this.#s=a,this.keyboard=null,this.keys=[],this.render()}render(){const e=a("div","keyboard-wrapper"),t=a("div","keyboard");e.append(t);const s=a("div","output__hint");Object.keys(i).forEach((e=>{const t=a("div");t.textContent=`${i[e]}`,s.append(t)})),this.container.append(e,s),this.keyboard=t,this.fill()}fill(){this.config.forEach(((e,t)=>{const s="Space"===t?o.#t:o.#e,n=new this.#s(this.keyboard,e,this.styleConfig[t]||this.styleConfig.default,this.language,s);this.keys.push(n)}))}refillKeys(e){"language"===e?this.keys.forEach((e=>{e.keyChar.textContent=this.config.get(e.keyData.code)[this.language]})):"capsOn"===e?this.keys.forEach((e=>{e.keyChar.textContent=this.config.get(e.keyData.code)[`${this.language}Caps`]})):this.keys.forEach((e=>{e.keyChar.textContent=this.config.get(e.keyData.code)[this.language]}))}}var p=o;const c=localStorage.getItem("LANGUAGE")||"en";new class{#n;#a;#i;#s;constructor(e,t,s,n,i,r,u,o,p){this.config=t,this.specialKeys=s,this.styleConfig=n,this.language=i,this.app=a("div","app"),e.append(this.app),this.#n=new p(this.app,"RSS_Virtual_Keyboard"),this.#i=new u(this.app),this.#a=new r(this.app,this.config,this.styleConfig,this.language,o),this.currentKeys=[]}addListeners(){document.addEventListener("keydown",(e=>{e.preventDefault(),this.#i.output.focus(),this.triggerPressEvent(e)})),document.addEventListener("keyup",(e=>{this.currentKeys.length&&this.handleUnpressedKey(e)})),this.#a.keyboard.addEventListener("mousedown",(e=>{e.preventDefault(),this.#i.output.focus()})),this.#a.keyboard.addEventListener("mouseup",(e=>{this.currentKeys.length&&this.handleUnpressedKey(e)})),this.app.addEventListener("keyClicked",(e=>{this.handleActiveKeys(e)})),this.app.addEventListener("keyPressed",(e=>{e.preventDefault(),this.handleActiveKeys(e)}))}triggerPressEvent(e){const t=this.config.get(e.code)[this.language],s=this.config.get(e.code).code,n=new CustomEvent("keyPressed",{capture:!0,detail:{key:t,keyCode:s}});this.app.dispatchEvent(n)}handleActiveKeys(e){const t=this.#a.keys.find((t=>t.keyData.code===e.detail.keyCode));t&&!this.currentKeys.includes(t)&&this.currentKeys.push(t),1===this.currentKeys.length&&this.currentKeys.forEach((e=>{e.playAudio(),e.key.classList.add("active"),this.update(e.keyData.code,e.keyData[this.language])})),this.currentKeys.length>1&&this.checkForShortcuts()}handleUnpressedKey(e){let t=null;"keyup"===e.type?("Shift"===e.key&&this.#a.refillKeys("capsOff"),t=this.currentKeys.find((t=>t.keyData.code===e.code))):t=this.currentKeys.find((t=>t.keyData.code===(e.target.dataset?.keyCode||e.target.parentNode.dataset.keyCode))),t&&(t.key.classList.remove("active"),this.currentKeys.splice(this.currentKeys.indexOf(t),1))}checkForShortcuts(){this.currentKeys.forEach((e=>{if(this.specialKeys.includes(e.keyData.code)){const t=e.keyData.code,s=this.currentKeys.filter((e=>e.keyData.code!==t));switch(t){case"ShiftLeft":case"ShiftRight":this.updateCaps(s);break;case"ControlLeft":s.filter((e=>"AltLeft"===e.keyData.code)).length&&(this.language="en"===this.language?"ru":"en",this.changeLanguage());break;default:return this}}return this}))}update(e,t){const s=this.#i.output.selectionStart,n=this.#i.output.selectionEnd;if(this.config.get(e)?.input&&(this.#i.output.selectionStart=this.#i.setContent(t,s,n)),!this.config.get(e)?.input)switch(e){case"Backspace":this.#i.output.selectionStart=this.#i.processBackspace(s,n);break;case"Enter":this.#i.output.selectionStart=this.#i.processEnter(s,n);break;case"Tab":this.#i.output.selectionStart=this.#i.processTab(s,n);break;case"Delete":this.#i.output.selectionStart=this.#i.processDelete(s,n);break;case"ShiftLeft":case"ShiftRight":this.#a.refillKeys("capsOn");break;default:return this}return this}updateCaps(e){e.forEach((e=>{this.update(e.keyData.code,e.keyData[`${this.language}Caps`])}))}changeLanguage(){var e;this.#a.language=this.language,e=this.language,localStorage.setItem("LANGUAGE",e),this.#a.refillKeys("language")}}(document.body,t,n,{Backspace:["key_2-5","key_accent-corall"],Tab:["key_1-5","key_default-dark"],Delete:["key_1","key_default-dark"],CapsLock:["key_2","key_default-dark"],Enter:["key_2-5","key_default-dark"],ShiftLeft:["key_2","key_default-dark"],ArrowUp:["key_1","key_accent-aquamarine","key_arrow","key_arrow-up"],ShiftRight:["key_2-5","key_default-dark"],ControlLeft:["key_1-5","key_default-dark"],AltLeft:["key_1","key_default-dark"],MetaLeft:["key_1","key_default-dark"],Space:["key_space","key_accent-mustard"],AltRight:["key_1","key_default-dark"],ArrowLeft:["key_1","key_accent-aquamarine","key_arrow","key_arrow-left"],ArrowDown:["key_1","key_accent-aquamarine","key_arrow","key_arrow-down"],ArrowRight:["key_1","key_accent-aquamarine","key_arrow","key_arrow-right"],ControlRight:["key_1-5","key_default-dark"],default:["key_1","key_default"]},c,p,class{#r="";constructor(e){this.output=a("textarea","output","app__output"),this.output.textContent="",this.#r=this.output.textContent,e.append(this.output)}setContent(e,t,s){return this.output.textContent=this.#r.substring(0,t)+e+this.#r.substring(s),this.#r=this.output.textContent,t+1}processBackspace(e,t){return this.output.textContent=e===t?this.#r.substring(0,e-1)+this.#r.substring(t):this.#r.substring(0,e)+this.#r.substring(t),this.#r=this.output.textContent,e===t?e-1:e}processDelete(e,t){return this.output.textContent=e===t?this.#r.substring(0,e)+this.#r.substring(t+1):this.#r.substring(0,e)+this.#r.substring(t),this.#r=this.output.textContent,e}processEnter(e,t){return this.output.textContent=`${this.#r.substring(0,e)}\n${this.#r.substring(t)}`,this.#r=this.output.textContent,e+1}processTab(e,t){return this.output.textContent=`${this.#r.substring(0,e)}\t${this.#r.substring(t)}`,this.#r=this.output.textContent,e+1}},class{constructor(e,t,s,n,a){this.container=e,this.keyData=t,this.keyClasses=s,this.language=n,this.audio=a,this.key=null,this.keyChar=null,this.render()}render(){const e=a("div","key",...this.keyClasses);e.dataset.keyCode=this.keyData.code,this.key=e;const t=a("span","key__char");this.keyChar=t,t.textContent=this.keyData[this.language],e.append(t),this.container.append(e),this.addListeners()}addListeners(){this.key.addEventListener("mousedown",(()=>{this.key.classList.add("active"),this.playAudio(),this.triggerClickEvent(this.keyData.en,this.key.dataset.keyCode)})),this.key.addEventListener("mouseup",(()=>{this.key.dispatchEvent(new KeyboardEvent("keyup"))})),this.key.addEventListener("mouseleave",(()=>{this.key.classList.remove("active")}))}triggerClickEvent(e,t){const s=new CustomEvent("keyClicked",{bubbles:!0,detail:{key:e,keyCode:t}});this.key.dispatchEvent(s)}playAudio(){this.audio.currentTime=0,this.audio.play()}},class{constructor(e,t){this.container=e,this.text=t,this.render()}render(){const e=a("div","app__heading","heading");this.container.append(e),this.text.split("").forEach((t=>{const s=a("span","heading__char");s.textContent=t,e.append(s)}))}}).addListeners()}();